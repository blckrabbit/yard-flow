import Designer,{Item,ItemPanel,Flow} from "../../dist";
import React, {Component} from "react";
import {Button,Modal,Dropdown,Menu} from 'antd'
import 'antd/dist/antd.less';
let graph=null;
class Demo extends Component {
  constructor(props){
    super(props);
    this.wfdRef = React.createRef();
    this.pageRef = React.createRef();
  }

  state = {
    modalVisible: false,
    selectedLang: 'zh',
  };

  langMenu = (
    <Menu onClick={(lang)=>{this.changeLang(lang)}}>
      <Menu.Item key="zh">
            <span role="img" >
              {"🇨🇳"}
            </span>
        {" 简体中文"}
      </Menu.Item>
      <Menu.Item key="en">
            <span role="img" >
              {"🇬🇧"}
            </span>
        {" English"}
      </Menu.Item>
    </Menu>
  );

  componentDidMount(){
    setTimeout(()=>{
      const nodes = graph.graph.getNodes();
      if(nodes && nodes.length>0)
        window.cb.events.trigger('__selectNode',nodes[0]);
    },300)
    
  }

  handleModalVisible(modalVisible){
    this.setState({modalVisible})
  }

  changeLang({key}){
    this.setState({selectedLang:key})
  }

  render(){
    let data = {
      nodes: [
        // { id: 'startNode1', x: 50, y: 200, label: '', clazz: 'start', },
        // { id: 'startNode2', x: 50, y: 320, label: '', clazz: 'timerStart', },
        { id: 'taskNode1',x: 50, y: 320,label: '主任审批', clazz: 'userTask',size:[150,45]  },
        { id: 'taskNode2',x: 100, y: 320,label: '经理审批', clazz: 'scriptTask',  },
        // { id: 'gatewayNode', x: 400, y: 320, label: '金额大于1000', clazz: 'inclusiveGateway',  },
        { id: 'taskNode3',x: 50, y: 320,label: '董事长审批', clazz: 'receiveTask', },
        // { id: 'catchNode1', x: 600, y: 200, label: '等待结束', clazz: 'signalCatch', },
        // { id: 'endNode', x: 600, y: 320, label: '', clazz: 'end', }
      ],
      edges: [
        // { source: 'startNode1', target: 'taskNode1', sourceAnchor:1, targetAnchor:3, clazz: 'flow' },
        // { source: 'startNode2', target: 'gatewayNode', sourceAnchor:1, targetAnchor:3, clazz: 'flow' },
        // { source: 'taskNode1', target: 'catchNode1', sourceAnchor:0, targetAnchor:0, clazz: 'flow' },
        // // { source: 'taskNode1', target: 'taskNode2', sourceAnchor:1, targetAnchor:3, clazz: 'flow' },
        // { source: 'taskNode2', target: 'gatewayNode', sourceAnchor:1, targetAnchor:0, clazz: 'flow' },
        { source: 'taskNode1', target: 'taskNode2', sourceAnchor:2, targetAnchor:2, clazz: 'flow' },
        // { source: 'gatewayNode', target: 'taskNode3', sourceAnchor:2, targetAnchor:0, clazz: 'flow' },
        // { source: 'gatewayNode', target: 'endNode', sourceAnchor:1, targetAnchor:2, clazz: 'flow'},
        // { source: 'taskNode3', target: 'endNode', sourceAnchor:1, targetAnchor:1, clazz: 'flow' },
        // { source: 'catchNode1', target: 'endNode', sourceAnchor:1, targetAnchor:0, clazz: 'flow' }
      ]
    };

	data = {"nodes":[{"id":"473250599484274689","appName":"app","name":"input","streamId":"473250929022351360","entityFullName":"com.seeyon.ctp.user.domain.entity.Order","entityName":"dw@app@order@agjjjpxi","entityCaption":null,"nodeId":"473250599484274689","parentId":"473250599484274690","items":[{"id":"com.seeyon.ctp.user.domain.entity.Order.id","fieldName":"id","fieldIndexName":"app@order@id","caption":"主键","fieldType":"MEASURE","fieldDataType":"LONG","folderName":"订单表主表","relationType":"NO_RELATION","entityFullName":"com.seeyon.ctp.user.domain.entity.Order","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@order@agjjjpxi","sourceTableName":"order","sourceTableNameCaption":"订单表主表"},{"id":"com.seeyon.ctp.user.domain.entity.Order.orderDate","fieldName":"date","fieldIndexName":"app@order@date","caption":"下单日期","fieldType":"DIMENSION","fieldDataType":"DATE","folderName":"订单表主表","relationType":"NO_RELATION","entityFullName":"com.seeyon.ctp.user.domain.entity.Order","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@order@agjjjpxi","sourceTableName":"order","sourceTableNameCaption":"订单表主表"},{"id":"com.seeyon.ctp.user.domain.entity.Order.goodsId","fieldName":"goods_id","fieldIndexName":"app@order@goods_id","caption":"商品id","fieldType":"MEASURE","fieldDataType":"LONG","folderName":"订单表主表","relationType":"NO_RELATION","entityFullName":"com.seeyon.ctp.user.domain.entity.Order","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@order@agjjjpxi","sourceTableName":"order","sourceTableNameCaption":"订单表主表"},{"id":"com.seeyon.ctp.user.domain.entity.Order.goodsNum","fieldName":"goods_num","fieldIndexName":"app@order@goods_num","caption":"商品数量","fieldType":"MEASURE","fieldDataType":"INTEGER","folderName":"订单表主表","relationType":"NO_RELATION","entityFullName":"com.seeyon.ctp.user.domain.entity.Order","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@order@agjjjpxi","sourceTableName":"order","sourceTableNameCaption":"订单表主表"},{"id":"com.seeyon.ctp.user.domain.entity.Order.amountMoney","fieldName":"amount_money","fieldIndexName":"app@order@amount_money","caption":"折前总额","fieldType":"MEASURE","fieldDataType":"DOUBLE","folderName":"订单表主表","relationType":"NO_RELATION","entityFullName":"com.seeyon.ctp.user.domain.entity.Order","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@order@agjjjpxi","sourceTableName":"order","sourceTableNameCaption":"订单表主表"},{"id":"com.seeyon.ctp.user.domain.entity.Order.discount","fieldName":"discount","fieldIndexName":"app@order@discount","caption":"折扣","fieldType":"MEASURE","fieldDataType":"DOUBLE","folderName":"订单表主表","relationType":"NO_RELATION","entityFullName":"com.seeyon.ctp.user.domain.entity.Order","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@order@agjjjpxi","sourceTableName":"order","sourceTableNameCaption":"订单表主表"},{"id":"com.seeyon.ctp.user.domain.entity.Order.amountActually","fieldName":"amount_actually","fieldIndexName":"app@order@amount_actually","caption":"实付金额","fieldType":"MEASURE","fieldDataType":"DOUBLE","folderName":"订单表主表","relationType":"NO_RELATION","entityFullName":"com.seeyon.ctp.user.domain.entity.Order","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@order@agjjjpxi","sourceTableName":"order","sourceTableNameCaption":"订单表主表"},{"id":"com.seeyon.ctp.user.domain.entity.Order.discountMoney","fieldName":"discount_money","fieldIndexName":"app@order@discount_money","caption":"折扣金额","fieldType":"MEASURE","fieldDataType":"DOUBLE","folderName":"订单表主表","relationType":"NO_RELATION","entityFullName":"com.seeyon.ctp.user.domain.entity.Order","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@order@agjjjpxi","sourceTableName":"order","sourceTableNameCaption":"订单表主表"},{"id":"com.seeyon.ctp.user.domain.entity.Order.salesManagerId","fieldName":"sales_manager_id","fieldIndexName":"app@order@sales_manager_id","caption":"销售经理id","fieldType":"MEASURE","fieldDataType":"LONG","folderName":"订单表主表","relationType":"NO_RELATION","entityFullName":"com.seeyon.ctp.user.domain.entity.Order","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@order@agjjjpxi","sourceTableName":"order","sourceTableNameCaption":"订单表主表"},{"id":"com.seeyon.ctp.user.domain.entity.Order.customerId","fieldName":"customer_id","fieldIndexName":"app@order@customer_id","caption":"客户id","fieldType":"MEASURE","fieldDataType":"LONG","folderName":"订单表主表","relationType":"NO_RELATION","entityFullName":"com.seeyon.ctp.user.domain.entity.Order","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@order@agjjjpxi","sourceTableName":"order","sourceTableNameCaption":"订单表主表"},{"id":"com.seeyon.ctp.user.domain.entity.Order.goodsId@com.seeyon.ctp.user.domain.entity.GoodsAll.id","fieldName":"id","fieldIndexName":"app@goods@goods_id@id","caption":"商品表_主键","fieldType":"MEASURE","fieldDataType":"LONG","folderName":"商品表","relationType":"ASSOCIATION","entityFullName":"com.seeyon.ctp.user.domain.entity.GoodsAll","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@order@agjjjpxi","sourceTableName":"goods","sourceTableNameCaption":"商品表"},{"id":"com.seeyon.ctp.user.domain.entity.Order.goodsId@com.seeyon.ctp.user.domain.entity.GoodsAll.goodsName","fieldName":"goods_name","fieldIndexName":"app@goods@goods_id@goods_name","caption":"商品表_商品名称","fieldType":"DIMENSION","fieldDataType":"STRING","folderName":"商品表","relationType":"ASSOCIATION","entityFullName":"com.seeyon.ctp.user.domain.entity.GoodsAll","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@order@agjjjpxi","sourceTableName":"goods","sourceTableNameCaption":"商品表"},{"id":"com.seeyon.ctp.user.domain.entity.Order.goodsId@com.seeyon.ctp.user.domain.entity.GoodsAll.goodsType","fieldName":"goods_type","fieldIndexName":"app@goods@goods_id@goods_type","caption":"商品表_商品类型","fieldType":"DIMENSION","fieldDataType":"STRING","folderName":"商品表","relationType":"ASSOCIATION","entityFullName":"com.seeyon.ctp.user.domain.entity.GoodsAll","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@order@agjjjpxi","sourceTableName":"goods","sourceTableNameCaption":"商品表"},{"id":"com.seeyon.ctp.user.domain.entity.Order.goodsId@com.seeyon.ctp.user.domain.entity.GoodsAll.goodsPrice","fieldName":"goods_price","fieldIndexName":"app@goods@goods_id@goods_price","caption":"商品表_商品单价","fieldType":"MEASURE","fieldDataType":"DOUBLE","folderName":"商品表","relationType":"ASSOCIATION","entityFullName":"com.seeyon.ctp.user.domain.entity.GoodsAll","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@order@agjjjpxi","sourceTableName":"goods","sourceTableNameCaption":"商品表"},{"id":"com.seeyon.ctp.user.domain.entity.Order.goodsId@com.seeyon.ctp.user.domain.entity.GoodsAll.description","fieldName":"description","fieldIndexName":"app@goods@goods_id@description","caption":"商品表_商品描述","fieldType":"DIMENSION","fieldDataType":"STRING","folderName":"商品表","relationType":"ASSOCIATION","entityFullName":"com.seeyon.ctp.user.domain.entity.GoodsAll","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@order@agjjjpxi","sourceTableName":"goods","sourceTableNameCaption":"商品表"},{"id":"com.seeyon.ctp.user.domain.entity.Order.salesManagerId@com.seeyon.ctp.user.domain.entity.OrgMemberAll.id","fieldName":"id","fieldIndexName":"app@org_member@sales_manager_id@id","caption":"人员表_主键","fieldType":"MEASURE","fieldDataType":"LONG","folderName":"人员表","relationType":"ASSOCIATION","entityFullName":"com.seeyon.ctp.user.domain.entity.OrgMemberAll","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@order@agjjjpxi","sourceTableName":"org_member","sourceTableNameCaption":"人员表"},{"id":"com.seeyon.ctp.user.domain.entity.Order.salesManagerId@com.seeyon.ctp.user.domain.entity.OrgMemberAll.name","fieldName":"name","fieldIndexName":"app@org_member@sales_manager_id@name","caption":"人员表_人员名称","fieldType":"DIMENSION","fieldDataType":"STRING","folderName":"人员表","relationType":"ASSOCIATION","entityFullName":"com.seeyon.ctp.user.domain.entity.OrgMemberAll","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@order@agjjjpxi","sourceTableName":"org_member","sourceTableNameCaption":"人员表"},{"id":"com.seeyon.ctp.user.domain.entity.Order.salesManagerId@com.seeyon.ctp.user.domain.entity.OrgMemberAll.regionId","fieldName":"region","fieldIndexName":"app@org_member@sales_manager_id@region","caption":"人员表_所属区域","fieldType":"MEASURE","fieldDataType":"LONG","folderName":"人员表","relationType":"ASSOCIATION","entityFullName":"com.seeyon.ctp.user.domain.entity.OrgMemberAll","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@order@agjjjpxi","sourceTableName":"org_member","sourceTableNameCaption":"人员表"},{"id":"com.seeyon.ctp.user.domain.entity.Order.customerId@com.seeyon.ctp.user.domain.entity.Customer.id","fieldName":"id","fieldIndexName":"app@customer@customer_id@id","caption":"客户_主键","fieldType":"MEASURE","fieldDataType":"LONG","folderName":"客户","relationType":"ASSOCIATION","entityFullName":"com.seeyon.ctp.user.domain.entity.Customer","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@order@agjjjpxi","sourceTableName":"customer","sourceTableNameCaption":"客户"},{"id":"com.seeyon.ctp.user.domain.entity.Order.customerId@com.seeyon.ctp.user.domain.entity.Customer.name","fieldName":"name","fieldIndexName":"app@customer@customer_id@name","caption":"客户_客户名称","fieldType":"DIMENSION","fieldDataType":"STRING","folderName":"客户","relationType":"ASSOCIATION","entityFullName":"com.seeyon.ctp.user.domain.entity.Customer","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@order@agjjjpxi","sourceTableName":"customer","sourceTableNameCaption":"客户"},{"id":"com.seeyon.ctp.user.domain.entity.Order.customerId@com.seeyon.ctp.user.domain.entity.Customer.address","fieldName":"address","fieldIndexName":"app@customer@customer_id@address","caption":"客户_客户地址","fieldType":"DIMENSION","fieldDataType":"STRING","folderName":"客户","relationType":"ASSOCIATION","entityFullName":"com.seeyon.ctp.user.domain.entity.Customer","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@order@agjjjpxi","sourceTableName":"customer","sourceTableNameCaption":"客户"},{"id":"com.seeyon.ctp.user.domain.entity.Order.customerId@com.seeyon.ctp.user.domain.entity.Customer.contactInfo","fieldName":"contact_info","fieldIndexName":"app@customer@customer_id@contact_info","caption":"客户_联系方式","fieldType":"DIMENSION","fieldDataType":"STRING","folderName":"客户","relationType":"ASSOCIATION","entityFullName":"com.seeyon.ctp.user.domain.entity.Customer","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@order@agjjjpxi","sourceTableName":"customer","sourceTableNameCaption":"客户"},{"id":"com.seeyon.ctp.user.domain.entity.Order.customerId@com.seeyon.ctp.user.domain.entity.Customer.region","fieldName":"region","fieldIndexName":"app@customer@customer_id@region","caption":"客户_所属区域","fieldType":"MEASURE","fieldDataType":"LONG","folderName":"客户","relationType":"ASSOCIATION","entityFullName":"com.seeyon.ctp.user.domain.entity.Customer","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@order@agjjjpxi","sourceTableName":"customer","sourceTableNameCaption":"客户"}],"tableName":"order","tableType":"MAIN","stereotype":"BILL","joinEntityNames":[{"targetEntityName":"com.seeyon.ctp.user.domain.entity.Order","sourceEntityName":"com.seeyon.ctp.user.domain.entity.GoodsAll","sourceTableName":"goods","targetTableName":"order","sourceAttribute":"id","targetAttribute":"goods_id","relationType":"ASSOCIATION"},{"targetEntityName":"com.seeyon.ctp.user.domain.entity.Order","sourceEntityName":"com.seeyon.ctp.user.domain.entity.OrgMemberAll","sourceTableName":"org_member","targetTableName":"order","sourceAttribute":"id","targetAttribute":"sales_manager_id","relationType":"ASSOCIATION"},{"targetEntityName":"com.seeyon.ctp.user.domain.entity.Order","sourceEntityName":"com.seeyon.ctp.user.domain.entity.Customer","sourceTableName":"customer","targetTableName":"order","sourceAttribute":"id","targetAttribute":"customer_id","relationType":"ASSOCIATION"}],"realId":"473250599484274689","nodeType":"INPUT","label":"新建主题表","x":100,"y":120,"size":[150,45]},{"id":"473250599484274690","appName":"app","name":"set_field","streamId":"473250929022351360","entityFullName":"com.seeyon.ctp.user.domain.entity.Order","entityName":"dw@app@order@agjjjpxi","entityCaption":null,"nodeId":"473250599484274690","parentId":"115145601014437941","items":[{"id":"com.seeyon.ctp.user.domain.entity.Order.id","fieldName":"id","fieldIndexName":"app@order@id","caption":"主键","fieldType":"MEASURE","fieldDataType":"LONG","folderName":"订单表主表","relationType":"NO_RELATION","entityFullName":"com.seeyon.ctp.user.domain.entity.Order","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@order@agjjjpxi","sourceTableName":"order","sourceTableNameCaption":"订单表主表"},{"id":"com.seeyon.ctp.user.domain.entity.Order.orderDate","fieldName":"date","fieldIndexName":"app@order@date","caption":"下单日期","fieldType":"DIMENSION","fieldDataType":"DATE","folderName":"订单表主表","relationType":"NO_RELATION","entityFullName":"com.seeyon.ctp.user.domain.entity.Order","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@order@agjjjpxi","sourceTableName":"order","sourceTableNameCaption":"订单表主表"},{"id":"com.seeyon.ctp.user.domain.entity.Order.goodsId","fieldName":"goods_id","fieldIndexName":"app@order@goods_id","caption":"商品id","fieldType":"MEASURE","fieldDataType":"LONG","folderName":"订单表主表","relationType":"NO_RELATION","entityFullName":"com.seeyon.ctp.user.domain.entity.Order","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@order@agjjjpxi","sourceTableName":"order","sourceTableNameCaption":"订单表主表"},{"id":"com.seeyon.ctp.user.domain.entity.Order.goodsNum","fieldName":"goods_num","fieldIndexName":"app@order@goods_num","caption":"商品数量","fieldType":"MEASURE","fieldDataType":"INTEGER","folderName":"订单表主表","relationType":"NO_RELATION","entityFullName":"com.seeyon.ctp.user.domain.entity.Order","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@order@agjjjpxi","sourceTableName":"order","sourceTableNameCaption":"订单表主表"}],"setFieldList":[{"id":"checkall","reName":null,"fieldType":null,"setFieldsTypeEnum":"HIDDEN","formula":null,"fields":null},{"id":"com.seeyon.ctp.user.domain.entity.Order.amountMoney","reName":null,"fieldType":null,"setFieldsTypeEnum":"HIDDEN","formula":null,"fields":null},{"id":"com.seeyon.ctp.user.domain.entity.Order.discount","reName":null,"fieldType":null,"setFieldsTypeEnum":"HIDDEN","formula":null,"fields":null},{"id":"com.seeyon.ctp.user.domain.entity.Order.amountActually","reName":null,"fieldType":null,"setFieldsTypeEnum":"HIDDEN","formula":null,"fields":null},{"id":"com.seeyon.ctp.user.domain.entity.Order.discountMoney","reName":null,"fieldType":null,"setFieldsTypeEnum":"HIDDEN","formula":null,"fields":null},{"id":"com.seeyon.ctp.user.domain.entity.Order.salesManagerId","reName":null,"fieldType":null,"setFieldsTypeEnum":"HIDDEN","formula":null,"fields":null},{"id":"com.seeyon.ctp.user.domain.entity.Order.customerId","reName":null,"fieldType":null,"setFieldsTypeEnum":"HIDDEN","formula":null,"fields":null},{"id":"com.seeyon.ctp.user.domain.entity.Order.goodsId@com.seeyon.ctp.user.domain.entity.GoodsAll.id","reName":null,"fieldType":null,"setFieldsTypeEnum":"HIDDEN","formula":null,"fields":null},{"id":"com.seeyon.ctp.user.domain.entity.Order.goodsId@com.seeyon.ctp.user.domain.entity.GoodsAll.goodsName","reName":null,"fieldType":null,"setFieldsTypeEnum":"HIDDEN","formula":null,"fields":null},{"id":"com.seeyon.ctp.user.domain.entity.Order.goodsId@com.seeyon.ctp.user.domain.entity.GoodsAll.goodsType","reName":null,"fieldType":null,"setFieldsTypeEnum":"HIDDEN","formula":null,"fields":null},{"id":"com.seeyon.ctp.user.domain.entity.Order.goodsId@com.seeyon.ctp.user.domain.entity.GoodsAll.goodsPrice","reName":null,"fieldType":null,"setFieldsTypeEnum":"HIDDEN","formula":null,"fields":null},{"id":"com.seeyon.ctp.user.domain.entity.Order.goodsId@com.seeyon.ctp.user.domain.entity.GoodsAll.description","reName":null,"fieldType":null,"setFieldsTypeEnum":"HIDDEN","formula":null,"fields":null},{"id":"com.seeyon.ctp.user.domain.entity.Order.salesManagerId@com.seeyon.ctp.user.domain.entity.OrgMemberAll.id","reName":null,"fieldType":null,"setFieldsTypeEnum":"HIDDEN","formula":null,"fields":null},{"id":"com.seeyon.ctp.user.domain.entity.Order.salesManagerId@com.seeyon.ctp.user.domain.entity.OrgMemberAll.name","reName":null,"fieldType":null,"setFieldsTypeEnum":"HIDDEN","formula":null,"fields":null},{"id":"com.seeyon.ctp.user.domain.entity.Order.salesManagerId@com.seeyon.ctp.user.domain.entity.OrgMemberAll.regionId","reName":null,"fieldType":null,"setFieldsTypeEnum":"HIDDEN","formula":null,"fields":null},{"id":"com.seeyon.ctp.user.domain.entity.Order.customerId@com.seeyon.ctp.user.domain.entity.Customer.id","reName":null,"fieldType":null,"setFieldsTypeEnum":"HIDDEN","formula":null,"fields":null},{"id":"com.seeyon.ctp.user.domain.entity.Order.customerId@com.seeyon.ctp.user.domain.entity.Customer.name","reName":null,"fieldType":null,"setFieldsTypeEnum":"HIDDEN","formula":null,"fields":null},{"id":"com.seeyon.ctp.user.domain.entity.Order.customerId@com.seeyon.ctp.user.domain.entity.Customer.address","reName":null,"fieldType":null,"setFieldsTypeEnum":"HIDDEN","formula":null,"fields":null},{"id":"com.seeyon.ctp.user.domain.entity.Order.customerId@com.seeyon.ctp.user.domain.entity.Customer.contactInfo","reName":null,"fieldType":null,"setFieldsTypeEnum":"HIDDEN","formula":null,"fields":null},{"id":"com.seeyon.ctp.user.domain.entity.Order.customerId@com.seeyon.ctp.user.domain.entity.Customer.region","reName":null,"fieldType":null,"setFieldsTypeEnum":"HIDDEN","formula":null,"fields":null}],"realId":"473250599484274690","nodeType":"SET_FIELD","label":"字段设置","x":350,"y":120,"size":[150,45]},{"id":"115145601014437941","appName":null,"name":"group_agg","streamId":"473250929022351360","entityFullName":"com.seeyon.ctp.user.domain.entity.Order","entityName":"dw@app@order@agjjjpxi","entityCaption":null,"nodeId":"115145601014437941","parentId":"112824977111191241","items":[{"id":"com.seeyon.ctp.user.domain.entity.Order.orderDate","fieldName":"date","fieldIndexName":"app@order@date@group","caption":"下单日期","fieldType":"DIMENSION","fieldDataType":"STRING","folderName":"订单表主表","relationType":"NO_RELATION","entityFullName":"com.seeyon.ctp.user.domain.entity.Order","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@order@agjjjpxi","sourceTableName":"order","sourceTableNameCaption":"订单表主表"},{"id":"com.seeyon.ctp.user.domain.entity.Order.goodsNum","fieldName":"goods_num","fieldIndexName":"app@order@goods_num@summary","caption":"商品数量","fieldType":"MEASURE","fieldDataType":"DOUBLE","folderName":"订单表主表","relationType":"NO_RELATION","entityFullName":"com.seeyon.ctp.user.domain.entity.Order","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@order@agjjjpxi","sourceTableName":"order","sourceTableNameCaption":"订单表主表"}],"fields":[{"id":"com.seeyon.ctp.user.domain.entity.Order.orderDate","fieldName":null,"fieldIndexName":"app@order@date","caption":null,"fieldType":null,"fieldDataType":null,"folderName":null,"relationType":null,"entityFullName":null,"formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":null,"sourceTableName":null,"sourceTableNameCaption":null,"name":"下单日期","operatorTypeEnum":"GROUP","dataTypeEnum":"DATETYPE","groupTypeEnum":"DAY","summaryType":null},{"id":"com.seeyon.ctp.user.domain.entity.Order.goodsNum","fieldName":null,"fieldIndexName":"app@order@goods_num","caption":null,"fieldType":null,"fieldDataType":null,"folderName":null,"relationType":null,"entityFullName":null,"formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":null,"sourceTableName":null,"sourceTableNameCaption":null,"name":"商品数量","operatorTypeEnum":"SUMMARY","dataTypeEnum":"NUMTYPE","groupTypeEnum":null,"summaryType":"SUM"}],"realId":"115145601014437941","nodeType":"GROUP_AGG","label":"分组汇总","x":600,"y":120,"size":[150,45]},{"id":"473394272113014785","appName":"app","name":"input","streamId":"473250929022351360","entityFullName":"com.seeyon.ctp.user.domain.entity.OrgMemberAll","entityName":"dw@app@org_member@hpsj1grq","entityCaption":null,"nodeId":"473394272113014785","parentId":"112824977111191241","items":[{"id":"com.seeyon.ctp.user.domain.entity.OrgMemberAll.id","fieldName":"id","fieldIndexName":"app@org_member@id","caption":"主键","fieldType":"MEASURE","fieldDataType":"LONG","folderName":"人员表","relationType":"NO_RELATION","entityFullName":"com.seeyon.ctp.user.domain.entity.OrgMemberAll","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@org_member@hpsj1grq","sourceTableName":"org_member","sourceTableNameCaption":"人员表"},{"id":"com.seeyon.ctp.user.domain.entity.OrgMemberAll.name","fieldName":"name","fieldIndexName":"app@org_member@name","caption":"人员名称","fieldType":"DIMENSION","fieldDataType":"STRING","folderName":"人员表","relationType":"NO_RELATION","entityFullName":"com.seeyon.ctp.user.domain.entity.OrgMemberAll","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@org_member@hpsj1grq","sourceTableName":"org_member","sourceTableNameCaption":"人员表"},{"id":"com.seeyon.ctp.user.domain.entity.OrgMemberAll.regionId","fieldName":"region","fieldIndexName":"app@org_member@region","caption":"所属区域","fieldType":"MEASURE","fieldDataType":"LONG","folderName":"人员表","relationType":"NO_RELATION","entityFullName":"com.seeyon.ctp.user.domain.entity.OrgMemberAll","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@org_member@hpsj1grq","sourceTableName":"org_member","sourceTableNameCaption":"人员表"},{"id":"com.seeyon.ctp.user.domain.entity.OrgMemberAll.regionId@com.seeyon.ctp.user.domain.entity.Region.id","fieldName":"id","fieldIndexName":"app@region@region@id","caption":"区域表_主键","fieldType":"MEASURE","fieldDataType":"LONG","folderName":"区域表","relationType":"ASSOCIATION","entityFullName":"com.seeyon.ctp.user.domain.entity.Region","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@org_member@hpsj1grq","sourceTableName":"region","sourceTableNameCaption":"区域表"},{"id":"com.seeyon.ctp.user.domain.entity.OrgMemberAll.regionId@com.seeyon.ctp.user.domain.entity.Region.name","fieldName":"name","fieldIndexName":"app@region@region@name","caption":"区域表_区域名称","fieldType":"DIMENSION","fieldDataType":"STRING","folderName":"区域表","relationType":"ASSOCIATION","entityFullName":"com.seeyon.ctp.user.domain.entity.Region","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@org_member@hpsj1grq","sourceTableName":"region","sourceTableNameCaption":"区域表"},{"id":"com.seeyon.ctp.user.domain.entity.OrgMemberAll.regionId@com.seeyon.ctp.user.domain.entity.Region.chiefManager","fieldName":"chiefManager","fieldIndexName":"app@region@region@chiefManager","caption":"区域表_区域主管","fieldType":"DIMENSION","fieldDataType":"STRING","folderName":"区域表","relationType":"ASSOCIATION","entityFullName":"com.seeyon.ctp.user.domain.entity.Region","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@org_member@hpsj1grq","sourceTableName":"region","sourceTableNameCaption":"区域表"},{"id":"com.seeyon.ctp.user.domain.entity.OrgMemberAll.regionId@com.seeyon.ctp.user.domain.entity.Region.pid","fieldName":"pid","fieldIndexName":"app@region@region@pid","caption":"区域表_父级ID","fieldType":"MEASURE","fieldDataType":"LONG","folderName":"区域表","relationType":"ASSOCIATION","entityFullName":"com.seeyon.ctp.user.domain.entity.Region","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@org_member@hpsj1grq","sourceTableName":"region","sourceTableNameCaption":"区域表"}],"tableName":"org_member","tableType":"NORMAL","stereotype":"ARCHIVE","joinEntityNames":[{"targetEntityName":"com.seeyon.ctp.user.domain.entity.OrgMemberAll","sourceEntityName":"com.seeyon.ctp.user.domain.entity.Region","sourceTableName":"region","targetTableName":"org_member","sourceAttribute":"id","targetAttribute":"region","relationType":"ASSOCIATION"}],"realId":"473394272113014785","nodeType":"INPUT","label":"人员表","x":100,"y":340,"size":[150,45]},{"id":"112824977111191241","appName":null,"name":"join","streamId":"473250929022351360","entityFullName":"com.seeyon.ctp.user.domain.entity.Order","entityName":"dw@app@order@agjjjpxi","entityCaption":null,"nodeId":"112824977111191241","parentId":"473250599484274692","items":[{"id":"com.seeyon.ctp.user.domain.entity.Order.orderDate","fieldName":"date","fieldIndexName":"app@order@date@group@group","caption":"下单日期","fieldType":"DIMENSION","fieldDataType":"STRING","folderName":"订单表主表","relationType":"NO_RELATION","entityFullName":"com.seeyon.ctp.user.domain.entity.Order","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@order@agjjjpxi","sourceTableName":"order","sourceTableNameCaption":"订单表主表"},{"id":"com.seeyon.ctp.user.domain.entity.OrgMemberAll.id","fieldName":"id","fieldIndexName":"app@org_member@id","caption":"人员表_主键","fieldType":"MEASURE","fieldDataType":"LONG","folderName":"人员表","relationType":"HAVE_RELATION","entityFullName":"com.seeyon.ctp.user.domain.entity.OrgMemberAll","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@org_member@hpsj1grq","sourceTableName":"org_member","sourceTableNameCaption":"人员表"},{"id":"com.seeyon.ctp.user.domain.entity.OrgMemberAll.name","fieldName":"name","fieldIndexName":"app@org_member@name","caption":"人员表_人员名称","fieldType":"DIMENSION","fieldDataType":"STRING","folderName":"人员表","relationType":"HAVE_RELATION","entityFullName":"com.seeyon.ctp.user.domain.entity.OrgMemberAll","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@org_member@hpsj1grq","sourceTableName":"org_member","sourceTableNameCaption":"人员表"},{"id":"com.seeyon.ctp.user.domain.entity.OrgMemberAll.regionId","fieldName":"region","fieldIndexName":"app@org_member@region","caption":"人员表_所属区域","fieldType":"MEASURE","fieldDataType":"LONG","folderName":"人员表","relationType":"HAVE_RELATION","entityFullName":"com.seeyon.ctp.user.domain.entity.OrgMemberAll","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@org_member@hpsj1grq","sourceTableName":"org_member","sourceTableNameCaption":"人员表"},{"id":"com.seeyon.ctp.user.domain.entity.OrgMemberAll.regionId@com.seeyon.ctp.user.domain.entity.Region.id","fieldName":"id","fieldIndexName":"app@region@region@id","caption":"区域表_区域表_主键","fieldType":"MEASURE","fieldDataType":"LONG","folderName":"区域表","relationType":"HAVE_RELATION","entityFullName":"com.seeyon.ctp.user.domain.entity.Region","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@org_member@hpsj1grq","sourceTableName":"region","sourceTableNameCaption":"区域表"},{"id":"com.seeyon.ctp.user.domain.entity.OrgMemberAll.regionId@com.seeyon.ctp.user.domain.entity.Region.name","fieldName":"name","fieldIndexName":"app@region@region@name","caption":"区域表_区域表_区域名称","fieldType":"DIMENSION","fieldDataType":"STRING","folderName":"区域表","relationType":"HAVE_RELATION","entityFullName":"com.seeyon.ctp.user.domain.entity.Region","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@org_member@hpsj1grq","sourceTableName":"region","sourceTableNameCaption":"区域表"},{"id":"com.seeyon.ctp.user.domain.entity.OrgMemberAll.regionId@com.seeyon.ctp.user.domain.entity.Region.chiefManager","fieldName":"chiefManager","fieldIndexName":"app@region@region@chiefManager","caption":"区域表_区域表_区域主管","fieldType":"DIMENSION","fieldDataType":"STRING","folderName":"区域表","relationType":"HAVE_RELATION","entityFullName":"com.seeyon.ctp.user.domain.entity.Region","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@org_member@hpsj1grq","sourceTableName":"region","sourceTableNameCaption":"区域表"},{"id":"com.seeyon.ctp.user.domain.entity.OrgMemberAll.regionId@com.seeyon.ctp.user.domain.entity.Region.pid","fieldName":"pid","fieldIndexName":"app@region@region@pid","caption":"区域表_区域表_父级ID","fieldType":"MEASURE","fieldDataType":"LONG","folderName":"区域表","relationType":"HAVE_RELATION","entityFullName":"com.seeyon.ctp.user.domain.entity.Region","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@org_member@hpsj1grq","sourceTableName":"region","sourceTableNameCaption":"区域表"}],"leftEntity":[{"id":"com.seeyon.ctp.user.domain.entity.Order.orderDate","fieldName":"date","fieldIndexName":"app@order@date@group@group","caption":"下单日期","fieldType":"DIMENSION","fieldDataType":"STRING","folderName":"订单表主表","relationType":"NO_RELATION","entityFullName":"com.seeyon.ctp.user.domain.entity.Order","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@order@agjjjpxi","sourceTableName":"order","sourceTableNameCaption":"订单表主表"},{"id":"com.seeyon.ctp.user.domain.entity.Order.goodsNum","fieldName":"goods_num","fieldIndexName":"app@order@goods_num@summary@summary","caption":"商品数量","fieldType":"MEASURE","fieldDataType":"DOUBLE","folderName":"订单表主表","relationType":"NO_RELATION","entityFullName":"com.seeyon.ctp.user.domain.entity.Order","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@order@agjjjpxi","sourceTableName":"order","sourceTableNameCaption":"订单表主表"}],"leftEntityName":"分组汇总","leftParentNodeId":"115145601014437941","rightEntity":[{"id":"com.seeyon.ctp.user.domain.entity.OrgMemberAll.id","fieldName":"id","fieldIndexName":"app@org_member@id","caption":"人员表_主键","fieldType":"MEASURE","fieldDataType":"LONG","folderName":"人员表","relationType":"HAVE_RELATION","entityFullName":"com.seeyon.ctp.user.domain.entity.OrgMemberAll","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@org_member@hpsj1grq","sourceTableName":"org_member","sourceTableNameCaption":"人员表"},{"id":"com.seeyon.ctp.user.domain.entity.OrgMemberAll.name","fieldName":"name","fieldIndexName":"app@org_member@name","caption":"人员表_人员名称","fieldType":"DIMENSION","fieldDataType":"STRING","folderName":"人员表","relationType":"HAVE_RELATION","entityFullName":"com.seeyon.ctp.user.domain.entity.OrgMemberAll","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@org_member@hpsj1grq","sourceTableName":"org_member","sourceTableNameCaption":"人员表"},{"id":"com.seeyon.ctp.user.domain.entity.OrgMemberAll.regionId","fieldName":"region","fieldIndexName":"app@org_member@region","caption":"人员表_所属区域","fieldType":"MEASURE","fieldDataType":"LONG","folderName":"人员表","relationType":"HAVE_RELATION","entityFullName":"com.seeyon.ctp.user.domain.entity.OrgMemberAll","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@org_member@hpsj1grq","sourceTableName":"org_member","sourceTableNameCaption":"人员表"},{"id":"com.seeyon.ctp.user.domain.entity.OrgMemberAll.regionId@com.seeyon.ctp.user.domain.entity.Region.id","fieldName":"id","fieldIndexName":"app@region@region@id","caption":"区域表_区域表_主键","fieldType":"MEASURE","fieldDataType":"LONG","folderName":"区域表","relationType":"HAVE_RELATION","entityFullName":"com.seeyon.ctp.user.domain.entity.Region","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@org_member@hpsj1grq","sourceTableName":"region","sourceTableNameCaption":"区域表"},{"id":"com.seeyon.ctp.user.domain.entity.OrgMemberAll.regionId@com.seeyon.ctp.user.domain.entity.Region.name","fieldName":"name","fieldIndexName":"app@region@region@name","caption":"区域表_区域表_区域名称","fieldType":"DIMENSION","fieldDataType":"STRING","folderName":"区域表","relationType":"HAVE_RELATION","entityFullName":"com.seeyon.ctp.user.domain.entity.Region","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@org_member@hpsj1grq","sourceTableName":"region","sourceTableNameCaption":"区域表"},{"id":"com.seeyon.ctp.user.domain.entity.OrgMemberAll.regionId@com.seeyon.ctp.user.domain.entity.Region.chiefManager","fieldName":"chiefManager","fieldIndexName":"app@region@region@chiefManager","caption":"区域表_区域表_区域主管","fieldType":"DIMENSION","fieldDataType":"STRING","folderName":"区域表","relationType":"HAVE_RELATION","entityFullName":"com.seeyon.ctp.user.domain.entity.Region","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@org_member@hpsj1grq","sourceTableName":"region","sourceTableNameCaption":"区域表"},{"id":"com.seeyon.ctp.user.domain.entity.OrgMemberAll.regionId@com.seeyon.ctp.user.domain.entity.Region.pid","fieldName":"pid","fieldIndexName":"app@region@region@pid","caption":"区域表_区域表_父级ID","fieldType":"MEASURE","fieldDataType":"LONG","folderName":"区域表","relationType":"HAVE_RELATION","entityFullName":"com.seeyon.ctp.user.domain.entity.Region","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@org_member@hpsj1grq","sourceTableName":"region","sourceTableNameCaption":"区域表"}],"rightEntityName":"人员表","rightParentNodeId":"473394272113014785","joinType":"INNER","isMerge":true,"joins":[{"leftFieldId":"com.seeyon.ctp.user.domain.entity.Order.goodsNum","leftFieldIndexName":"app@order@goods_num@summary@summary","leftFieldName":"goods_num","rightFieldId":"com.seeyon.ctp.user.domain.entity.OrgMemberAll.regionId@com.seeyon.ctp.user.domain.entity.Region.id","rightFieldIndexName":"app@region@region@id","rightFieldName":"id"}],"realId":"112824977111191241","nodeType":"JOIN","label":"关联","x":350,"y":120,"size":[150,45]},{"id":"473250599484274692","appName":"app","name":"output","streamId":"473250929022351360","entityFullName":"com.seeyon.ctp.user.domain.entity.Order","entityName":"dw@app@order@agjjjpxi","entityCaption":null,"nodeId":"473250599484274692","parentId":"473250599484274694","items":[{"id":"com.seeyon.ctp.user.domain.entity.Order.orderDate","fieldName":"date","fieldIndexName":"app@order@date@group@group","caption":"下单日期","fieldType":"DIMENSION","fieldDataType":"STRING","folderName":"订单表主表","relationType":"NO_RELATION","entityFullName":"com.seeyon.ctp.user.domain.entity.Order","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@order@agjjjpxi","sourceTableName":"order","sourceTableNameCaption":"订单表主表","title":"下单日期","key":"com.seeyon.ctp.user.domain.entity.Order.orderDate"},{"id":"com.seeyon.ctp.user.domain.entity.OrgMemberAll.id","fieldName":"id","fieldIndexName":"app@org_member@id","caption":"人员表_主键","fieldType":"MEASURE","fieldDataType":"LONG","folderName":"人员表","relationType":"HAVE_RELATION","entityFullName":"com.seeyon.ctp.user.domain.entity.OrgMemberAll","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@org_member@hpsj1grq","sourceTableName":"org_member","sourceTableNameCaption":"人员表","title":"人员表_主键","key":"com.seeyon.ctp.user.domain.entity.OrgMemberAll.id"},{"id":"com.seeyon.ctp.user.domain.entity.OrgMemberAll.name","fieldName":"name","fieldIndexName":"app@org_member@name","caption":"人员表_人员名称","fieldType":"DIMENSION","fieldDataType":"STRING","folderName":"人员表","relationType":"HAVE_RELATION","entityFullName":"com.seeyon.ctp.user.domain.entity.OrgMemberAll","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@org_member@hpsj1grq","sourceTableName":"org_member","sourceTableNameCaption":"人员表","title":"人员表_人员名称","key":"com.seeyon.ctp.user.domain.entity.OrgMemberAll.name"},{"id":"com.seeyon.ctp.user.domain.entity.OrgMemberAll.regionId","fieldName":"region","fieldIndexName":"app@org_member@region","caption":"人员表_所属区域","fieldType":"MEASURE","fieldDataType":"LONG","folderName":"人员表","relationType":"HAVE_RELATION","entityFullName":"com.seeyon.ctp.user.domain.entity.OrgMemberAll","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@org_member@hpsj1grq","sourceTableName":"org_member","sourceTableNameCaption":"人员表","title":"人员表_所属区域","key":"com.seeyon.ctp.user.domain.entity.OrgMemberAll.regionId"},{"id":"com.seeyon.ctp.user.domain.entity.OrgMemberAll.regionId@com.seeyon.ctp.user.domain.entity.Region.id","fieldName":"id","fieldIndexName":"app@region@region@id","caption":"区域表_区域表_主键","fieldType":"MEASURE","fieldDataType":"LONG","folderName":"区域表","relationType":"HAVE_RELATION","entityFullName":"com.seeyon.ctp.user.domain.entity.Region","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@org_member@hpsj1grq","sourceTableName":"region","sourceTableNameCaption":"区域表","title":"区域表_区域表_主键","key":"com.seeyon.ctp.user.domain.entity.OrgMemberAll.regionId@com.seeyon.ctp.user.domain.entity.Region.id"},{"id":"com.seeyon.ctp.user.domain.entity.OrgMemberAll.regionId@com.seeyon.ctp.user.domain.entity.Region.name","fieldName":"name","fieldIndexName":"app@region@region@name","caption":"区域表_区域表_区域名称","fieldType":"DIMENSION","fieldDataType":"STRING","folderName":"区域表","relationType":"HAVE_RELATION","entityFullName":"com.seeyon.ctp.user.domain.entity.Region","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@org_member@hpsj1grq","sourceTableName":"region","sourceTableNameCaption":"区域表","title":"区域表_区域表_区域名称","key":"com.seeyon.ctp.user.domain.entity.OrgMemberAll.regionId@com.seeyon.ctp.user.domain.entity.Region.name"},{"id":"com.seeyon.ctp.user.domain.entity.OrgMemberAll.regionId@com.seeyon.ctp.user.domain.entity.Region.chiefManager","fieldName":"chiefManager","fieldIndexName":"app@region@region@chiefManager","caption":"区域表_区域表_区域主管","fieldType":"DIMENSION","fieldDataType":"STRING","folderName":"区域表","relationType":"HAVE_RELATION","entityFullName":"com.seeyon.ctp.user.domain.entity.Region","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@org_member@hpsj1grq","sourceTableName":"region","sourceTableNameCaption":"区域表","title":"区域表_区域表_区域主管","key":"com.seeyon.ctp.user.domain.entity.OrgMemberAll.regionId@com.seeyon.ctp.user.domain.entity.Region.chiefManager"},{"id":"com.seeyon.ctp.user.domain.entity.OrgMemberAll.regionId@com.seeyon.ctp.user.domain.entity.Region.pid","fieldName":"pid","fieldIndexName":"app@region@region@pid","caption":"区域表_区域表_父级ID","fieldType":"MEASURE","fieldDataType":"LONG","folderName":"区域表","relationType":"HAVE_RELATION","entityFullName":"com.seeyon.ctp.user.domain.entity.Region","formula":false,"expression":null,"expressionGroovy":null,"tableIndexName":"dw@app@org_member@hpsj1grq","sourceTableName":"region","sourceTableNameCaption":"区域表","title":"区域表_区域表_父级ID","key":"com.seeyon.ctp.user.domain.entity.OrgMemberAll.regionId@com.seeyon.ctp.user.domain.entity.Region.pid"}],"stereotype":"BILL","realId":"473250599484274692","nodeType":"OUTPUT","label":"输出节点","x":600,"y":120,"size":[150,45]}],"edges":[{"beginIds":"473250599484274689","endId":"473250599484274690","source":"473250599484274689","target":"473250599484274690"},{"beginIds":"473250599484274690","endId":"115145601014437941","source":"473250599484274690","target":"115145601014437941"},{"beginIds":"115145601014437941","endId":"112824977111191241","source":"115145601014437941","target":"112824977111191241"},{"beginIds":"473394272113014785","endId":"112824977111191241","source":"473394272113014785","target":"112824977111191241"},{"beginIds":"112824977111191241","endId":"473250599484274692","source":"112824977111191241","target":"473250599484274692"}]};	

    const data1 = {
      nodes: [{ id: 'startNode1', x: 50, y: 200, label: '', clazz: 'start', },
        { id: 'startNode2', x: 50, y: 320, label: '', clazz: 'timerStart', },
        { id: 'taskNode1', x: 200, y: 200, label: '主任审批', clazz: 'userTask',size:'180*90'  },
        { id: 'taskNode2', x: 400, y: 200, label: '经理审批', clazz: 'scriptTask', active:true },
        { id: 'gatewayNode', x: 400, y: 320, label: '金额大于1000', clazz: 'gateway',  },
        { id: 'taskNode3', x: 400, y: 450, label: '董事长审批', clazz: 'receiveTask', },
        { id: 'catchNode1', x: 600, y: 200, label: '等待结束', clazz: 'signalCatch', },
        { id: 'endNode', x: 600, y: 320, label: '', clazz: 'end', }],
      edges: [{ source: 'startNode1', target: 'taskNode1', sourceAnchor:1, targetAnchor:3, clazz: 'flow' },
        { source: 'startNode2', target: 'gatewayNode', sourceAnchor:1, targetAnchor:3, clazz: 'flow' },
        { source: 'taskNode1', target: 'catchNode1', sourceAnchor:0, targetAnchor:0, clazz: 'flow' },
        { source: 'taskNode1', target: 'taskNode2', sourceAnchor:1, targetAnchor:3, clazz: 'flow' },
        { source: 'taskNode2', target: 'gatewayNode', sourceAnchor:1, targetAnchor:0, clazz: 'flow' },
        { source: 'taskNode2', target: 'taskNode1', sourceAnchor:2, targetAnchor:2, clazz: 'flow' },
        { source: 'gatewayNode', target: 'taskNode3', sourceAnchor:2, targetAnchor:0, clazz: 'flow' },
        { source: 'gatewayNode', target: 'endNode', sourceAnchor:1, targetAnchor:2, clazz: 'flow'},
        { source: 'taskNode3', target: 'endNode', sourceAnchor:1, targetAnchor:1, clazz: 'flow' },
        { source: 'catchNode1', target: 'endNode', sourceAnchor:1, targetAnchor:0, clazz: 'flow' }]
    };

    const candidateUsers = [{id:'1',name:'Tom'},{id:'2',name:'Steven'},{id:'3',name:'Andy'}];
    const candidateGroups = [{id:'1',name:'Manager'},{id:'2',name:'Security'},{id:'3',name:'OA'}];
    const height = document.documentElement.clientHeight;
    console.log(height+'a2222---');
    const { modalVisible,selectedLang } = this.state;
    return (
      <div style={{height:'500px',width:'900px'}}>
        <Button style={{float:'right',marginTop:6,marginRight:6}} onClick={()=>this.wfdRef.current.graph.saveXML()}>导出XML</Button>
        <Button style={{float:'right',marginTop:6,marginRight:6}} onClick={()=>this.handleModalVisible(true)}>查看流程图</Button>
        <Dropdown overlay={this.langMenu} trigger={['click']}>
          <Button style={{float:'right',marginTop:6,marginRight:10}} >语言</Button>
        </Dropdown>
        <Designer ref={this.wfdRef} setRef={(grf)=>{
          graph = grf;
          }} isViewMiniMap={true} height={500} >
          <ItemPanel>
            <>
              <Item className="item" model={"{clazz:'userTask',size:'120*44',label:'输入'}"}>
                  <img src={require('../../assets/flow/user-task.svg')} style={{width: 80, height: 44}}/>
                  <div>输入</div>
              </Item>
              <Item className="item" model={"{clazz:'subProcess',size:'120*44',label:'输出'}"}>
                  <img src={require('../../assets/flow/sub-process.svg')} style={{width: 80, height: 44}}/>
                  <div>输出</div>
              </Item>
              <Item className="item" model={"{clazz:'scriptTask',size:'120*44',label:'字段设置'}"}>
                  <img src={require('../../assets/flow/script-task.svg')} style={{width: 80, height: 44}}/>
                  <div>字段设置</div>
              </Item>
              <Item className="item" model={"{clazz:'groupTask',size:'120*44',label:'过滤'}"}>
                  <img src={require('../../assets/flow/java-task.svg')} style={{width: 80, height: 44}}/>
                  <div>过滤</div>
              </Item>
              <Item className="item" model={"{clazz:'mailTask',size:'120*44',label:'分组汇总'}"}>
                  <img src={require('../../assets/flow/mail-task.svg')} style={{width: 80, height: 44}}/>
                  <div>分组汇总</div>
              </Item>
              <Item className="item" model={"{clazz:'receiveTask',size:'120*44',label:'关联'}"}>
                  <img src={require('../../assets/flow/receive-task.svg')} style={{width: 80, height: 44}}/>
                  <div>关联</div>
              </Item>
            </>
          </ItemPanel>
          <Flow height={height} data={data}/>
        </Designer>
        <Modal title="查看流程图" visible={modalVisible} onCancel={()=>this.handleModalVisible(false)} width={800} maskClosable={false} footer={null} destroyOnClose bodyStyle={{height}} >
          <Designer  height={500}  isView >
            <Flow height={height} data={data}/>
          </Designer>
        </Modal>
      </div>
    );
  }
}

export default Demo;
